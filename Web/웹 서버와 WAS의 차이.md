# 웹 서버와 WAS의 차이

## 개요

WPF로 구성된 기존 프로그램을 WEB구조로 변환하기위해 웹아키텍처와 기능명세서를 작성해야한다.
하지만 WEB이 돌아가는 전체적인 구조의 이해가 부족해 우선 웹서버와 WAS의 차이를 알아보려한다.

## Web Server

웹 서버는 클라이언트(사용자)가 웹 브라우저 주소창에 url을 입력해 페이지를 요청하면 웹 서버는 요청을 받아 정적인 콘텐츠를 사용자에게 제공해주는 역할이다.

정적 콘텐츠는 단순 HTML문서, css, javascript, 이미지, 파일 등 즉시 응답가능한 컨텐츠이다.

웹 서버는 정적 콘텐츠를 제공해주는 역할만 하는것이 아니라 동적컨텐츠를 WAS로 전달하는 역할도한다.

대표적인 웹서버 : Apache,Nginx,IIS(윈도우 전용 웹서버)

## WAS(Web Application Server)

WAS는 웹 서버와 웹 컨테이너가 합쳐진 형태로서, 웹 서버가 단독으로 처리할 수 없는 DB조회, 다양한 로직처리가 필요한 동적컨텐츠를 제공해주는 역할이다.

웹 서버가 할 수있는 기능 대부분이 WAS에서도 처리가 가능하고 비지니스 로직(서버에서 로직처리)를 할수 있어 사용자에 요구에 맞게 처리가 가능하다.

대표적인 WAS : Tomcat

> 웹 컨테이너 : 웹서버가 보낸 JSP, PHP등의 파일 수행 결과를 다시 웹서버로 전송하는 역할

## 웹서버와 WAS 차이

웹 서버와 WAS는 전체적으로 보면 클라이언트가 요청하면 응답하는 비슷한 기능을 하지만 어떤 요청의 데이터를 처리하는지 차이가 있고 사용의 목적도 다르다.

웹 서버는 정적인 데이터를 처리하는 서버이고, WAS는 동적인 데이터를 처리하는 서버이다.

## 효율적 사용

근데 WAS에서 웹 서버가 할 수있는 기능 대부분을 처리가 가능하다고 했다. 그럼 왜 웹 서버와 WAS를 분리해서 사용할까?

물론 정적인 컨텐츠만 제공하는 웹 사이트를 서버에 배포한다고 하면 웹 서버만으로도 충분하다. 그런데 동적인 컨텐츠를 제공해야하는 웹서비스 배포를 해야 한다고 생각하면 정적, 동적처리가 모두 가능한 WAS만을 사용해두 되지 않을까 라는 생각이든다.

WAS 만으로 정적,동적 컨텐츠 처리를 하려고 하면 가능은 하다. 하지만 정적,동적 컨텐츠를 모두 처리하게되면 부하가 커져 동적 컨텐츠 처리가 지연되고 수행속도도 느려서 페이지 노출시간이 느려지는 문제가 발생해 효율성이 떨어진다.

즉, 웹서버와 WAS를 분리해서 사용하는 이유는 정적컨텐츠는 웹서버가, 동적컨텐츠는 WAS가 처리하도록 하여 서버 부하를 방지한다.

그리고 사람이 많이 접속하는 WAS인 경우, 서버의 수가 여러 대일 수 있다. 만약 사용중에 WAS에 문제가 생겨 WAS를 재시작 해야되는 경우 앞단의 웹서버에서 WAS를 사용하지 못하도록 차단한후 WAS를 재시작하면 사용자가 WAS가 문제가 발생한지 모르고 이용할 수도 있다.

## 웹 서비스 구조

웹 서비스 구조는 다양한 형태를 가질 수 있다

- Client -> 웹서버 -> DB
- Client -> WAS -> DB
- Client -> 웹서버 -> WAS -> DB
